@isTest
public class Frontier_GetAccountDetails_CMP360_Test {
	
    @testSetup
    static void setup(){
        TestUtilClass.createEndPointCompany360();
    }
    
     static testmethod void accountDetailPositive(){
        
        Test.startTest();
        EndpointUrlSetting__c endPoint = [SELECT Name,Authorization_Url__c,Auth_Token_URL__c,Client_Id__c,Client_Secret__c FROM EndpointUrlSetting__c];
        system.debug('endPoint=>'+endPoint);
         Map<String,String> responseHeaders = new Map<String, String>();
        responseHeaders.put('Content-Type','application/json');
        
        SingleRequestMock accessTokenResult = new SingleRequestMock(200,'Complete','{"access_token": "nyPqAVhZibXzt8h6xQgE6f6yXJi7","token_type": "Bearer","expires_in": 7199}',
                                                                    responseHeaders);
        SingleRequestMock responseResults = new SingleRequestMock(200,'Complete',
																  '{"items": [{"fiscalYear": "2016","fiscalPeriod": "","companyCode": "5110","countryCode": "US","seasonDesc": "","cropDesc": "Corn","brandDesc": "DK","growerKey": "","growerSourceSystemCode": "QION","grossSalesQuantity": 2615.31,"netSalesQuantity": 2490,"grossSalesAmount": 758826.48,"netSalesAmount": 587489.12}],"limit": 0}',responseHeaders);
        Map<String, HttpCalloutMock> endPointResults = new Map<String,HttpCalloutMock>();
        endPointResults.put('https://test.amp.monsanto.com/as/token.oauth2',accessTokenResult);
        endPointResults.put('https://api01-np.agro.services/company360/0.0.1/commercial/net-sales-rc-grower?fiscalYear&access_token=nyPqAVhZibXzt8h6xQgE6f6yXJi7',responseResults);
        Test.setMock(HttpCalloutMock.class, new MockHttpResponseGenerator(endPointResults));
        String response =   '{"items": [{"fiscalYear": "2016","fiscalPeriod": "","companyCode": "5110","countryCode": "US","seasonDesc": "","cropDesc": "Corn","brandDesc": "DK","growerKey": "","growerSourceSystemCode": "QION","grossSalesQuantity": 2615.31,"netSalesQuantity": 2490,"grossSalesAmount": 758826.48,"netSalesAmount": 587489.12}],"limit": 0}';
        Frontier_GetAccountDetails_CMP360.getGrowerAccs();
        List<Frontier_GetAccountDetails_CMP360.DealerResponseData> responseData = new List<Frontier_GetAccountDetails_CMP360.DealerResponseData>();
        responseData.add((Frontier_GetAccountDetails_CMP360.DealerResponseData)JSON.deserialize(response,Frontier_GetAccountDetails_CMP360.DealerResponseData.class));
        system.debug('responseData=>'+responseData[0].fiscalYear+','+responseData[0].fiscalPeriod+','+responseData[0].countryCode+','+responseData[0].companyCode+','+responseData[0].seasonDesc+','+responseData[0].cropDesc+','+responseData[0].brandDesc+','+responseData[0].growerKey+','+responseData[0].growerSourceSystemCode+','+responseData[0].grossSalesQuantity+','+responseData[0].netSalesQuantity+','+responseData[0].grossSalesAmount+','+responseData[0].netSalesAmount );
         
         
         //Frontier_GrowerProfileController.GrowerDetails('{"globalPartyId":"c4a8ffbc-e053-45be-9e85-f92efb1df2fe","accountRadl":"R","name":"Dale Wicks Farm","addressLine1":"123 Main Street","addressLine2":"","addressLine3":"","city":"Saint Charles","county":"Saint Charles","state":"MO","zip":"63301","zipSuffix":"","country":"US","phone":"3141234567","email":"wickFarms@gmail.com","salesTerritoryDesignation":"","areaUnitOfMeasure":"acres","primaryContact":{"globalPartyId":"b80d0f55-01d6-4b2a-91f5-1f0ffe841008","firstName":"Dale","lastName":"Wicks","phone":"3141234567","email":"wickFarms@gmail.com"},"seasonalData":[{"fiscalYear":"2016","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":600,"farmingAreaMonsantoShare":60,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":500,"areaMonsantoShare":50,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":300,"areaOpportunity":400,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":400,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":600,"grossSales":125,"netSales":150,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":160,"netQuantity":158,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]},{"fiscalYear":"2015","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":550,"farmingAreaMonsantoShare":50,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":550,"areaMonsantoShare":55,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":350,"areaOpportunity":450,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":450,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":450,"grossSales":120,"netSales":140,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":150,"netQuantity":151,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]}]}','2016 - Corn','FY16');
		//List<Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper> responseResult= new List<Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper>();
		//responseResult.add((Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper)JSON.deserialize('{"globalPartyId":"c4a8ffbc-e053-45be-9e85-f92efb1df2fe","accountRadl":"R","name":"Dale Wicks Farm","addressLine1":"123 Main Street","addressLine2":"","addressLine3":"","city":"Saint Charles","county":"Saint Charles","state":"MO","zip":"63301","zipSuffix":"","country":"US","phone":"3141234567","email":"wickFarms@gmail.com","salesTerritoryDesignation":"","areaUnitOfMeasure":"acres","primaryContact":{"globalPartyId":"b80d0f55-01d6-4b2a-91f5-1f0ffe841008","firstName":"Dale","lastName":"Wicks","phone":"3141234567","email":"wickFarms@gmail.com"},"seasonalData":[{"fiscalYear":"2016","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":600,"farmingAreaMonsantoShare":60,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":500,"areaMonsantoShare":50,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":300,"areaOpportunity":400,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":400,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":600,"grossSales":125,"netSales":150,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":160,"netQuantity":158,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]},{"fiscalYear":"2015","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":550,"farmingAreaMonsantoShare":50,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":550,"areaMonsantoShare":55,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":350,"areaOpportunity":450,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":450,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":450,"grossSales":120,"netSales":140,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":150,"netQuantity":151,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]}]}',Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper.Class));                         
        Test.stopTest();
        
        //'{"items": [{"fiscalYear": "2016","fiscalPeriod": "","companyCode": "5110","countryCode": "US","seasonDesc": "","cropDesc": "Corn","brandDesc": "DK","growerKey": "","growerSourceSystemCode": "QION","grossSalesQuantity": 2615.31,"netSalesQuantity": 2490,"grossSalesAmount": 758826.48,"netSalesAmount": 587489.12}],"limit": 0}',

        
    }
     static testmethod void accountDetailNegative(){
        
        Test.startTest();
        EndpointUrlSetting__c endPoint = [SELECT Name,Authorization_Url__c,Auth_Token_URL__c,Client_Id__c,Client_Secret__c FROM EndpointUrlSetting__c];
        system.debug('endPoint=>'+endPoint);
         Map<String,String> responseHeaders = new Map<String, String>();
        responseHeaders.put('Content-Type','application/json');
        
        SingleRequestMock accessTokenResult = new SingleRequestMock(400,'Complete','{"access_token": "nyPqAVhZibXzt8h6xQgE6f6yXJi7","token_type": "Bearer","expires_in": 7199}',
                                                                    responseHeaders);
        SingleRequestMock responseResults = new SingleRequestMock(400,'Complete',
																  '',responseHeaders);
        Map<String, HttpCalloutMock> endPointResults = new Map<String,HttpCalloutMock>();
        endPointResults.put('https://test.amp.monsanto.com/as/token.oauth2',accessTokenResult);
        endPointResults.put('https://api01-np.agro.services/company360/0.0.1/commercial/net-sales-rc-grower?fiscalYear&access_token=nyPqAVhZibXzt8h6xQgE6f6yXJi7',responseResults);
        Test.setMock(HttpCalloutMock.class, new MockHttpResponseGenerator(endPointResults));
        String response =   '{"items": [{"fiscalYear": "2016","fiscalPeriod": "","companyCode": "5110","countryCode": "US","seasonDesc": "","cropDesc": "Corn","brandDesc": "DK","growerKey": "","growerSourceSystemCode": "QION","grossSalesQuantity": 2615.31,"netSalesQuantity": 2490,"grossSalesAmount": 758826.48,"netSalesAmount": 587489.12}],"limit": 0}';
        Frontier_GetAccountDetails_CMP360.getGrowerAccs();
        List<Frontier_GetAccountDetails_CMP360.DealerResponseData> responseData = new List<Frontier_GetAccountDetails_CMP360.DealerResponseData>();
        responseData.add((Frontier_GetAccountDetails_CMP360.DealerResponseData)JSON.deserialize(response,Frontier_GetAccountDetails_CMP360.DealerResponseData.class));
        system.debug('responseData=>'+responseData[0].fiscalYear+','+responseData[0].fiscalPeriod+','+responseData[0].countryCode+','+responseData[0].companyCode+','+responseData[0].seasonDesc+','+responseData[0].cropDesc+','+responseData[0].brandDesc+','+responseData[0].growerKey+','+responseData[0].growerSourceSystemCode+','+responseData[0].grossSalesQuantity+','+responseData[0].netSalesQuantity+','+responseData[0].grossSalesAmount+','+responseData[0].netSalesAmount );
         
         
         //Frontier_GrowerProfileController.GrowerDetails('{"globalPartyId":"c4a8ffbc-e053-45be-9e85-f92efb1df2fe","accountRadl":"R","name":"Dale Wicks Farm","addressLine1":"123 Main Street","addressLine2":"","addressLine3":"","city":"Saint Charles","county":"Saint Charles","state":"MO","zip":"63301","zipSuffix":"","country":"US","phone":"3141234567","email":"wickFarms@gmail.com","salesTerritoryDesignation":"","areaUnitOfMeasure":"acres","primaryContact":{"globalPartyId":"b80d0f55-01d6-4b2a-91f5-1f0ffe841008","firstName":"Dale","lastName":"Wicks","phone":"3141234567","email":"wickFarms@gmail.com"},"seasonalData":[{"fiscalYear":"2016","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":600,"farmingAreaMonsantoShare":60,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":500,"areaMonsantoShare":50,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":300,"areaOpportunity":400,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":400,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":600,"grossSales":125,"netSales":150,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":160,"netQuantity":158,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]},{"fiscalYear":"2015","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":550,"farmingAreaMonsantoShare":50,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":550,"areaMonsantoShare":55,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":350,"areaOpportunity":450,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":450,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":450,"grossSales":120,"netSales":140,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":150,"netQuantity":151,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]}]}','2016 - Corn','FY16');
		//List<Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper> responseResult= new List<Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper>();
		//responseResult.add((Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper)JSON.deserialize('{"globalPartyId":"c4a8ffbc-e053-45be-9e85-f92efb1df2fe","accountRadl":"R","name":"Dale Wicks Farm","addressLine1":"123 Main Street","addressLine2":"","addressLine3":"","city":"Saint Charles","county":"Saint Charles","state":"MO","zip":"63301","zipSuffix":"","country":"US","phone":"3141234567","email":"wickFarms@gmail.com","salesTerritoryDesignation":"","areaUnitOfMeasure":"acres","primaryContact":{"globalPartyId":"b80d0f55-01d6-4b2a-91f5-1f0ffe841008","firstName":"Dale","lastName":"Wicks","phone":"3141234567","email":"wickFarms@gmail.com"},"seasonalData":[{"fiscalYear":"2016","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":600,"farmingAreaMonsantoShare":60,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":500,"areaMonsantoShare":50,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":300,"areaOpportunity":400,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":400,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":400,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":600,"grossSales":125,"netSales":150,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":160,"netQuantity":158,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]},{"fiscalYear":"2015","sellingSeason":"","growerRadl":"A","farmingAreaTotal":1000,"farmingAreaMonsanto":550,"farmingAreaMonsantoShare":50,"crop":[{"name":"Corn","radl":"L","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":550,"areaMonsantoShare":55,"brand":[{"name":"Dekalb","family":"National","radl":"D","areaMonsanto":350,"areaOpportunity":450,"grossSales":3125.99,"netSales":100,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":300,"netQuantity":280,"grossAndNetQuantityUnitOfMeasure":"SSU"},{"name":"Stone","family":"Regional","radl":"L","areaMonsanto":200,"areaOpportunity":450,"grossSales":325,"netSales":50,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":60,"netQuantity":58,"grossAndNetQuantityUnitOfMeasure":"SSU"}]},{"name":"Soybean","radl":"R","areaTotal":1000,"areaOpportunity":450,"areaMonsanto":100,"areaMonsantoShare":10,"brand":[{"name":"Channel","family":"Channel","radl":"A","areaMonsanto":100,"areaOpportunity":450,"grossSales":120,"netSales":140,"grossAndNetSalesUnitOfMeasure":"USD","grossQuantity":150,"netQuantity":151,"grossAndNetQuantityUnitOfMeasure":"SSU"}]}]}]}',Frontier_GetAccountFarmingDatas_CUS360.GrowerResponsewrapper.Class));                         
        Test.stopTest();
        
        //'{"items": [{"fiscalYear": "2016","fiscalPeriod": "","companyCode": "5110","countryCode": "US","seasonDesc": "","cropDesc": "Corn","brandDesc": "DK","growerKey": "","growerSourceSystemCode": "QION","grossSalesQuantity": 2615.31,"netSalesQuantity": 2490,"grossSalesAmount": 758826.48,"netSalesAmount": 587489.12}],"limit": 0}',

        
    }
}